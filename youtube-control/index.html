<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>YouTube Video Control</title>
        <style>
            * {
                margin: 0;
                padding: 0;
                box-sizing: border-box;
            }
            section {
                height: 100vh;
                padding: 4vw;
            }
            section h2 {
                font-weight: 4vw;
                color: #fff;
            }
            .section1 {
                background: skyblue;
            }
            .section2 {
                background: yellowgreen;
            }
            .section3 {
                background: tomato;
            }
            .video {
                position: fixed;
                top: 5%;
                right: 5%;
                border: 10px solid #000;
                z-index: 100;
            }
        </style>
        <script src="https://www.youtube.com/iframe_api"></script>

        <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.5/gsap.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.5/ScrollTrigger.min.js"></script>
    </head>
    <body>
        <div class="video">
            <div id="player"></div>
            <div>
                <button id="pauseButton">Pause Video</button>
                <button id="playButton">Play Video</button>
            </div>
        </div>
        <section class="section1"><h2>SECTION 1</h2></section>
        <section class="section2"><h2>SECTION 2</h2></section>
        <section class="section3"><h2>SECTION 3</h2></section>

        <script>
            let player;

            function onYouTubeIframeAPIReady() {
                player = new YT.Player('player', {
                    height: '315',
                    width: '560',
                    videoId: 'YzuwW9xTvho',
                    playerVars: {
                        autoplay: 1, // ìë™ ì¬ìƒ í™œì„±í™”
                        controls: 0, // í”Œë ˆì´ì–´ ì»¨íŠ¸ë¡¤ëŸ¬ ìˆ¨ê¹€
                        mute: 1, // ìŒì†Œê±° ìƒíƒœë¡œ ì‹œì‘
                        loop: 1, // ë°˜ë³µ ì¬ìƒ í™œì„±í™”
                        playlist: 'YzuwW9xTvho', // ë°˜ë³µ ì¬ìƒì„ ìœ„í•œ ì¬ìƒëª©ë¡ ì„¤ì •
                        rel: 0, // ë™ì˜ìƒ ì¼ì‹œì •ì§€/ì¢…ë£Œ ì‹œ ì¶”ì²œ ë™ì˜ìƒ ìˆ¨ê¹€ ğŸš¨ ì œëŒ€ë¡œ ë™ì‘í•˜ì§€ ì•ŠìŒ
                        modestbranding: 1, // YouTube ë¡œê³  ìµœì†Œí™”
                        showinfo: 0, // ë™ì˜ìƒ ì œëª©ê³¼ ì—…ë¡œë” ì •ë³´ ìˆ¨ê¹€
                    },
                    events: {
                        onReady: onPlayerReady,
                        onStateChange: onPlayerStateChange,
                    },
                });
            }

            function onPlayerReady(event) {
                // ë¹„ë””ì˜¤ê°€ ì¤€ë¹„ë˜ë©´ ì¬ìƒ
                console.log(player);

                event.target.playVideo();

                // ë²„íŠ¼ì— ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€
                document.getElementById('pauseButton').addEventListener('click', function () {
                    player.pauseVideo();
                });

                document.getElementById('playButton').addEventListener('click', function () {
                    player.playVideo();
                });

                // ScrollTrigger
                ScrollTrigger.create({
                    trigger: '.section2',
                    markers: true,
                    start: 'top 0%',
                    pin: true,
                    onEnter: () => {
                        player.pauseVideo();
                        document.querySelector('.section2 h2').textContent = player.videoTitle;
                    },
                    onLeave: () => player.playVideo(),
                    onEnterBack: () => player.pauseVideo(),
                    onLeaveBack: () => player.playVideo(),
                });
            }

            function onPlayerStateChange(event) {
                // í•„ìš”í•œ ê²½ìš° ì—¬ê¸°ì— ìƒíƒœ ë³€ê²½ ì²˜ë¦¬ë¥¼ ì¶”ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤
                console.log('Player State:', event.data);
            }
        </script>
    </body>
</html>
